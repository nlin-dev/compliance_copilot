---
phase: 05-frontend
plan: 01
type: execute
---

<objective>
Add theme provider and dark mode toggle to the application.

Purpose: Enable users to switch between light and dark themes for comfortable viewing in different environments.
Output: Working dark mode with system preference detection and manual toggle.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior work:**
- shadcn/ui already configured with CSS variables for theming (01-01)
- NavHeader component exists at src/components/layout/nav-header.tsx
- Layout at src/app/layout.tsx needs provider wrapper

**Key files:**
@src/app/layout.tsx
@src/components/layout/nav-header.tsx
@src/app/globals.css

**Tech available:** shadcn/ui, Tailwind CSS with dark mode class strategy
**Pattern:** next-themes with attribute="class" for Tailwind compatibility
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install next-themes and add ThemeProvider</name>
  <files>package.json, src/app/layout.tsx, src/components/providers/theme-provider.tsx</files>
  <action>
    1. Install next-themes: `npm install next-themes`
    2. Create src/components/providers/theme-provider.tsx as a client component that wraps next-themes ThemeProvider with attribute="class" and defaultTheme="system" enableSystem
    3. Update src/app/layout.tsx:
       - Add suppressHydrationWarning to html tag
       - Wrap body children with ThemeProvider
       - Keep existing NavHeader and children structure
    Note: ThemeProvider must be a separate 'use client' component since layout.tsx is a server component.
  </action>
  <verify>npm run build succeeds with no hydration warnings</verify>
  <done>ThemeProvider wraps the app, system theme preference detected, build passes</done>
</task>

<task type="auto">
  <name>Task 2: Create dark mode toggle and add to header</name>
  <files>src/components/layout/theme-toggle.tsx, src/components/layout/nav-header.tsx</files>
  <action>
    1. Create src/components/layout/theme-toggle.tsx:
       - 'use client' component using useTheme from next-themes
       - Button with Sun/Moon icons from lucide-react
       - Handle mounted state to avoid hydration mismatch
       - Toggle between light/dark themes on click
       - Use shadcn Button with variant="ghost" size="icon"
    2. Update src/components/layout/nav-header.tsx:
       - Import and add ThemeToggle next to navigation
       - Position on right side of header
  </action>
  <verify>npm run dev - click toggle switches theme, page reflects dark/light mode correctly</verify>
  <done>Toggle button visible in header, clicking switches between light and dark themes, state persists on refresh</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Dark mode toggle visible in navigation header
- [ ] Clicking toggle switches between light and dark themes
- [ ] System preference is detected on first load
- [ ] Theme persists across page refreshes
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No hydration warnings in console
- Theme toggle works correctly
</success_criteria>

<output>
After completion, create `.planning/phases/05-frontend/05-01-SUMMARY.md`
</output>
