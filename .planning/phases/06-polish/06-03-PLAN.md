---
phase: 06-polish
plan: 03
type: execute
---

<objective>
Verify application functionality with example queries and perform Lighthouse performance audit.

Purpose: Ensure the application works end-to-end and meets performance standards before deployment.
Output: Verified functionality, documented test results.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./06-03-SUMMARY.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior work
@.planning/phases/06-polish/06-02-SUMMARY.md

# Key files
@src/app/api/query/route.ts
@src/app/api/compliance/route.ts
@data/sample-visit-notes.json

**Prerequisites:** Pinecone database must be populated (npm run ingest completed)
**Note:** These tests require live API connections (OpenAI, Pinecone) and populated vector database
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Q&A chat and compliance checking functionality</what-built>
  <how-to-verify>
    **Prerequisites:**
    - Ensure `.env` has valid API keys (OPENAI_API_KEY, PINECONE_API_KEY, etc.)
    - Ensure vector database is populated: `npm run ingest` (if not already done)

    **Start the app:**
    ```bash
    npm run dev
    ```

    **Test Q&A Chat (http://localhost:3000/chat):**
    Test these 10 example queries, verifying each returns relevant answers with source citations:

    1. "What are the requirements for homebound status?"
    2. "What constitutes a skilled nursing service?"
    3. "What must be included in a plan of care?"
    4. "What are the face-to-face encounter requirements?"
    5. "How long is the certification period for home health?"
    6. "What qualifies as a qualifying stay for home health eligibility?"
    7. "What are the documentation requirements for each visit?"
    8. "When can physical therapy be provided as a standalone service?"
    9. "What are the requirements for physician supervision of home health?"
    10. "How are home health recertifications handled?"

    **For each query, verify:**
    - Response streams smoothly (no long delays)
    - Response cites specific CMS sections (source cards appear)
    - Content is relevant to the question asked
    - No error messages

    **Test Compliance Checker (http://localhost:3000/compliance):**
    1. Use "Complete Compliant Note" example - should return mostly PASS
    2. Use "Missing Homebound Documentation" - homebound_status should FAIL
    3. Use "Missing Skilled Nursing Justification" - skilled_nursing_need should FAIL
    4. Use "Vague Documentation" - should have NEEDS_REVIEW findings
    5. Use "Minimal Compliant Documentation" - should PASS (marginal)

    **For each compliance check, verify:**
    - Results load with skeleton, then display findings
    - Status badges show correct status (PASS/FAIL/NEEDS_REVIEW)
    - Each finding has explanation and cited evidence
    - No error messages
  </how-to-verify>
  <resume-signal>Type "verified" if all queries and compliance checks work correctly, or describe any issues found</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production-ready web application</what-built>
  <how-to-verify>
    **Run Lighthouse audit:**
    1. Open Chrome DevTools (F12)
    2. Go to "Lighthouse" tab
    3. Select: Performance, Accessibility, Best Practices, SEO
    4. Select: Desktop mode
    5. Click "Analyze page load"

    **Run on these pages:**
    - http://localhost:3000/ (home)
    - http://localhost:3000/chat
    - http://localhost:3000/compliance

    **Expected scores (Desktop):**
    - Performance: > 80
    - Accessibility: > 90
    - Best Practices: > 90
    - SEO: > 90

    **Note any significant issues:**
    - Large Contentful Paint > 2.5s
    - Cumulative Layout Shift > 0.1
    - Missing alt text
    - Color contrast issues
    - Missing meta tags

    Minor performance variations are acceptable for dev mode.
  </how-to-verify>
  <resume-signal>Type "passed" with scores, or list issues that need addressing</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 10 Q&A queries return relevant answers with citations
- [ ] All 5 compliance test cases produce expected results
- [ ] Lighthouse scores meet thresholds on all pages
- [ ] No critical accessibility or SEO issues
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Application works end-to-end
- Ready for production deployment
- Phase 6 complete
</success_criteria>

<output>
After completion, create `.planning/phases/06-polish/06-03-SUMMARY.md` with:
- Query test results (pass/fail for each)
- Compliance test results (pass/fail for each)
- Lighthouse scores for each page
- Any issues discovered and remediation notes
- "Phase 6 complete - ready for deployment"
</output>
